@{
    ViewBag.Title = "crop";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>crop</h2>
<script src="~/Scripts/jquery-ui-1.8.20.min.js"></script>
<link href="~/Content/Scripts/cropzoom/jquery.cropzoom.css" rel="stylesheet" />
<script src="~/Content/Scripts/cropzoom/jquery.cropzoom.js" type="text/javascript"></script>

<div class="crop">
   <div id="cropzoom_container"></div>
   <div id="preview"><img id="generated" src=""  /></div>
   <div class="page_btn">
      <input type="button" class="btn" id="crop" value="剪切照片" />
      <input type="button" class="btn" id="restore" value="照片复位" />
   </div>
   <div class="clear"></div>
</div>

<script type="text/javascript">
$(function() {
     var cropzoom = $('#cropzoom_container').cropzoom({
          width: 500,
          height: 360,
          bgColor: '#ccc',
          enableRotation: true,
          enableZoom: true,
          selector: {
			   w:150,
			   h:100,
			   showPositionsOnDrag:true,
			   showDimetionsOnDrag:false,
               centered: true,
			   bgInfoLayer:'#fff',
               borderColor: 'blue',
			   animated: false,
			   maxWidth:150,
			   maxHeight:200,
               borderColorHover: 'yellow'
           },
           image: {
               source: '../../image/index/2ce7753c-68a4-483a-97f2-feb91761311c',
               width: 400,
               height: 400,
               minZoom: 30,
               maxZoom: 150
            }
      });
	 $("#crop").click(function(){
	     cropzoom.send('../../image/crop', 'POST', { id: "2ce7753c-68a4-483a-97f2-feb91761311c" }, function (imgRet) {
               $("#generated").attr("src", imgRet);
          });			   
	 });
	 $("#restore").click(function(){
	     $("#generated").attr("src", "");
		  cropzoom.restore();					  
	 });
});
</script>
